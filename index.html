<!DOCTYPE html>
<html>
  <head>
    <meta charset='utf-8'>
    <meta http-equiv="X-UA-Compatible" content="chrome=1">
    <link href='https://fonts.googleapis.com/css?family=Chivo:900' rel='stylesheet' type='text/css'>
    <link rel="stylesheet" type="text/css" href="stylesheets/stylesheet.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/github-dark.css" media="screen">
    <link rel="stylesheet" type="text/css" href="stylesheets/print.css" media="print">
    <!--[if lt IE 9]>
    <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <title>sinatra-notebook by dukeoflaser</title>
  </head>

  <body>
    <div id="container">
      <div class="inner">

        <header>
          <h1>sinatra-notebook</h1>
          <h2>A small app for sharing lessons with music students.</h2>
        </header>

        <section id="downloads" class="clearfix">
          <a href="https://github.com/dukeoflaser/sinatra-notebook/zipball/master" id="download-zip" class="button"><span>Download .zip</span></a>
          <a href="https://github.com/dukeoflaser/sinatra-notebook/tarball/master" id="download-tar-gz" class="button"><span>Download .tar.gz</span></a>
          <a href="https://github.com/dukeoflaser/sinatra-notebook" id="view-on-github" class="button"><span>View on GitHub</span></a>
        </section>

        <hr>

        <section id="main_content">
          <h3>
<a id="on-experimentation" class="anchor" href="#on-experimentation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>On Experimentation</h3>

<p>I collect ducks. Usually without knowing it. I often wrestle with those ducks, trying to put them in rows. Once I get a row, I am then allowed to start. What I mean by that is this: I feel as though I need to know the most efficient methods, the most effective approaches to a task, or goal, before I start. In essence, I want to know the outcome of my actions, even before acting. That mindset, as obviously futile as it is, can often be paralyzing. It has put a stop to many of my ideas before those ideas ever started. Case in point, this blog. I have always felt as though I need to be the world's foremost expert (or close to it) on a subject in order to write about it. </p>

<p>As an avid reader and listener of <a href="fourhourworkweek.com/blog/">Tim Ferriss</a>, it has slowly dawned upon me that <em>experimentation</em> is a much more rewarding and feasible approach to acting on an idea. I feel as though experimentation ...agile development, the concept of learning from your own actions, tracking data, is a more effective mindset for learning, for acting on ideas, and growing as a person. </p>

<h3>
<a id="on-evaluation" class="anchor" href="#on-evaluation" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>On Evaluation</h3>

<p>...Track Data
With that in mind, that is the format this blog post will take. Examining issues, things that I did not/do not know, my solutions, even if they are not the best or 'right', documenting them, examining what I did right, what I can do better next time. Use this blog post as a measuring stick.</p>

<h3>
<a id="where-to-start-boilerplate-and-workflow" class="anchor" href="#where-to-start-boilerplate-and-workflow" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Where to start? Boilerplate and Workflow.</h3>

<h4>
<a id="what-im-happy-with" class="anchor" href="#what-im-happy-with" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What I'm happy with.</h4>

<p>I had a good idea of which gems I would be relying on, how to get a development database setup, and my general file requirements and dependencies. In my mind, the chain of dependencies, starting with when the app is run, looks like this:</p>

<div class="highlight highlight-source-ruby"><pre>dependencies <span class="pl-k">=</span> {
  <span class="pl-c1">:shotgun</span> =&gt; <span class="pl-c1">:config</span>,
  <span class="pl-c1">:config</span> =&gt; <span class="pl-c1">:app_controller</span>,
  <span class="pl-c1">:app_controller</span> =&gt; <span class="pl-c1">:environment</span>,
  <span class="pl-c1">:environment</span> =&gt; <span class="pl-c1">:gems</span>,
  <span class="pl-c1">:gems</span> =&gt; <span class="pl-c1">:bundler</span>
}</pre></div>

<p>With that it mind, I didn't have too much trouble getting Sinatra to fire.</p>

<p>As far as work flow is concerned, my tendency to get some ducks in a row paid off. Simply taking the time to create a rough mockup/flowchart gave me a good idea of what models, relationships, and views I was going to need.</p>

<p>Starting off by creating the models and their associations seemed like a no-brainer, but effectively creating controllers and views seemed to require more mixing and matching. In the end, I sketched in the routes for each controller, and then introduced functionality to the views on an 'as-needed' basis. </p>

<h4>
<a id="what-i-could-do-better" class="anchor" href="#what-i-could-do-better" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What I could do better.</h4>

<p>Once I got my core files and directories set up, I should have saved them to an additional repository as a staring point for any future Sinatra projects. </p>

<p>I did find <a href="http://ashleygwilliams.github.io/ratpack/">this</a> boilerplate, however, which is similar to what I put together. I will probably give this a whirl next time around, although I think there is something to be said for crafting one's own set of tools if possible.</p>

<h3>
<a id="multiple-controllers---configuration" class="anchor" href="#multiple-controllers---configuration" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Multiple Controllers - Configuration.</h3>

<h4>
<a id="what-im-happy-with-1" class="anchor" href="#what-im-happy-with-1" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What I'm happy with.</h4>

<p>I was tempted to dump all my routes into the main app controller, but after completing the project and looking at the files, I'm glad I didn't. In this case, having a modular structure seems like the best way to go.</p>

<h4>
<a id="what-i-could-have-done-better" class="anchor" href="#what-i-could-have-done-better" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>What I could have done better.</h4>

<p>When setting the configuration block for the main App Controller, I initially assumed that those configurations would be global, and apply to my other controllers. </p>

<div class="highlight highlight-source-ruby"><pre>  configure <span class="pl-k">do</span>
    set <span class="pl-c1">:public_folder</span>, <span class="pl-s"><span class="pl-pds">'</span>public<span class="pl-pds">'</span></span>
    set <span class="pl-c1">:views</span>, <span class="pl-s"><span class="pl-pds">'</span>app/views<span class="pl-pds">'</span></span>
    enable <span class="pl-c1">:sessions</span>
    set <span class="pl-c1">:session_secret</span>, <span class="pl-s"><span class="pl-pds">'</span>its_a_secret<span class="pl-pds">'</span></span>
    register <span class="pl-c1">Sinatra</span>::<span class="pl-c1">Flash</span>
  <span class="pl-k">end</span></pre></div>

<p>When I realized that was not the case, I experimented with my <code>config.ru</code> file to no avail. I settled on simply including the configuration block in each and every controller. That, however, seems like a bit of a code smell and I have a sneaking suspicion there is a cleaner way of achieving the same results in a less redundant way. What that way is though, I don't yet know.</p>

<p>I also had an issue with '<a href="http://stackoverflow.com/questions/735073/best-way-to-require-all-files-from-a-directory-in-ruby">properly</a>' requiring relative files. I could get the 'improper' method working, </p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c1">Dir</span>[<span class="pl-s"><span class="pl-pds">"</span>./app/controllers/*.rb<span class="pl-pds">"</span></span>].each {|<span class="pl-smi">file</span>| <span class="pl-k">require</span> file }</pre></div>

<p>but ended up with an error message when using the following 'proper' technique. </p>

<div class="highlight highlight-source-ruby"><pre><span class="pl-c1">Dir</span>[<span class="pl-c1">File</span>.dirname(<span class="pl-v">__FILE__</span>) <span class="pl-k">+</span> <span class="pl-s"><span class="pl-pds">'</span>./app/controllers/*.rb<span class="pl-pds">'</span></span>].each {|<span class="pl-smi">file</span>| <span class="pl-k">require</span> file }</pre></div>

<p>Digging in to both with <code>pry</code> indicated both were returning the same array of files so it remains a mystery to me as to why the second one failed. At the end of the day I used the <code>require_all</code> gem. That tidy's things up nicely, but is likely heavy handed for requiring a minimal number of files.</p>

<h3>
<a id="sessions-vs-dynamic-urls" class="anchor" href="#sessions-vs-dynamic-urls" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Sessions vs Dynamic URLs</h3>

<h3>
<a id="multiple-layouts-and-templates" class="anchor" href="#multiple-layouts-and-templates" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>Multiple Layouts and Templates</h3>

<h3>
<a id="the-frustration-of-css" class="anchor" href="#the-frustration-of-css" aria-hidden="true"><span aria-hidden="true" class="octicon octicon-link"></span></a>The Frustration of CSS.</h3>
        </section>

        <footer>
          sinatra-notebook is maintained by <a href="https://github.com/dukeoflaser">dukeoflaser</a><br>
          This page was generated by <a href="https://pages.github.com">GitHub Pages</a>. Tactile theme by <a href="https://twitter.com/jasonlong">Jason Long</a>.
        </footer>

        
      </div>
    </div>
  </body>
</html>
